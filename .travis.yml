language: bash

sudo: 'required'

notifications:
  email:
    on_success: never
    on_failure: always

services:
  - docker

env:
  - DOCKER_COMPOSE_VERSION=1.25.0

before_install:
  - chmod +x ./.travis/main.sh
  - ./.travis/main.sh

install:
  - git clone https://github.com/litespeedtech/ols-docker-env.git
  - docker-compose build
  - docker-compose up -d

before_script:
  - docker image ls
  - docker ps
  - docker inspect ols-docker-env_litespeed
  - sleep 15
  - curl -Ik http://localhost:80/

after_script:
  - docker-compose stop
  - docker-compose rm -f

#after_success:
#  - if [[ "$TRAVIS_BRANCH" == "master" ]]; then
#      docker login -u $DOCKER_USERNAME -p $DOCKER_PASSWORD ;
#      make push-image ;
#    fi



